# Story 6.3: Mission Planner RF Integration and Operator Control

## **ðŸŽ¯ STORY OVERVIEW**

**As a** SAR drone operator using Mission Planner,  
**I want** complete RF control and visualization integrated within Mission Planner interface,  
**so that** I can control frequency selection, monitor RF detection, and manage homing operations without switching between multiple applications.

## **âœ… ACCEPTANCE CRITERIA**

1. **Integrated Frequency Control**: Operator can select RF frequencies directly from Mission Planner parameter interface
2. **Real-time RF Visualization**: RSSI graphs, signal strength indicators, and bearing information displayed in Mission Planner
3. **Unified Homing Control**: Homing activation/deactivation controlled from Mission Planner interface
4. **Enhanced Telemetry**: Signal classification, confidence metrics, and detection events visible in Mission Planner
5. **Operator Workflow Integration**: All RF operations accessible through Mission Planner without external tools
6. **Safety Preservation**: All existing safety overrides and emergency procedures maintained through Mission Planner
7. **Performance Compliance**: RF parameter changes applied with <50ms response time per PRD requirements

## **ðŸ“‹ ACTIVE TODO TASKS**

**`[ ]`** **`[TASK-6.3.1-MISSION-PLANNER-PARAMETER-INTERFACE]`** **Mission Planner Parameter Interface for RF Control** **[Priority: P0]** **[Concurrency: ðŸŸ¡ CONDITIONAL]**
- **Hardware:** *Cube Red via MAVLink, existing proven communication*
- **Files:** `src/backend/services/mavlink_service.py`, MAVLink parameter implementation, RF control interface
- **Dependencies:** Story 6.1 SUBTASK-6.1.3.1 complete (Mission Planner frequency control interface)
- **Integration Points:** **VERIFIED** - Existing `MAVLinkService`, parameter interface, Mission Planner compatibility
- **Parallel Development:** **ðŸŸ¡ CONDITIONAL** - Can develop parameter structure in parallel, sequential dependency at MAVLink implementation
- **Prerequisites:** Enhanced single-frequency processing from Story 6.1
- **Integration Boundary:** MAVLink parameter implementation - requires ASV frequency control from Story 6.1  
- **Resource Conflicts:** Modifications to `mavlink_service.py` - coordinate with telemetry enhancement work
- **Max Developers:** 1 (MAVLink interface implementation)
- **Subtasks:**
  - **[ ]** **SUBTASK-6.3.1.1:** Implement MAVLink parameter interface for frequency control
    - **[ ]** **[28a1]** Create MAVLink parameter schema definitions for PISAD_RF_FREQ parameter (REAL32, 1MHz-6GHz range)
    - **[ ]** **[28a2]** Implement PISAD_RF_PROFILE parameter (INT32, 0=Emergency, 1=Aviation, 2=Custom)
    - **[ ]** **[28a3]** Add PISAD_RF_BANDWIDTH parameter for signal processing configuration (1kHz-10MHz range)
    - **[ ]** **[28a4]** Create parameter persistence mechanism for frequency settings across system restarts
    - **[ ]** **[28b1]** Implement async parameter change handler in `mavlink_service.py` with timing validation
    - **[ ]** **[28b2]** Create parameter validation pipeline with frequency range checking and conflict resolution
    - **[ ]** **[28b3]** Add parameter change notification system for ASV service integration
    - **[ ]** **[28b4]** Implement <50ms response time measurement and monitoring for parameter updates
    - **[ ]** **[28c1]** Create Emergency Beacon profile (406.0-406.1MHz, 25kHz bandwidth, ELT signal characteristics)
    - **[ ]** **[28c2]** Implement Aviation Emergency profile (121.5MHz, 50kHz bandwidth, aviation radio characteristics)
    - **[ ]** **[28c3]** Add Search and Rescue profile (162.025MHz, maritime emergency beacon characteristics)
    - **[ ]** **[28c4]** Create Custom profile with user-defined frequency, bandwidth, and signal type parameters
    - **[ ]** **[28d1]** Implement HackRF operational range validation (24MHz-1.75GHz effective, extended to 1MHz-6GHz)
    - **[ ]** **[28d2]** Add frequency conflict detection with existing radio systems and interference sources
    - **[ ]** **[28d3]** Create frequency allocation compliance checking against regional RF regulations
    - **[ ]** **[28d4]** Implement automatic frequency adjustment for optimal signal processing based on ASV recommendations
  - **[ ]** **SUBTASK-6.3.1.2:** Mission Planner homing control integration
    - **[ ]** **[29a1]** Implement MAV_CMD_USER_1 command handler for homing enable/disable with parameter validation
    - **[ ]** **[29a2]** Create homing activation safety checks (signal detected, guided mode, operator confirmation)
    - **[ ]** **[29a3]** Add homing command confirmation and acknowledgment system for Mission Planner feedback
    - **[ ]** **[29a4]** Implement homing command integration with enhanced algorithm control from Story 6.2
    - **[ ]** **[29b1]** Create PISAD_HOMING_STATE parameter with comprehensive state reporting (0=Disabled, 1=Armed, 2=Active, 3=Lost)
    - **[ ]** **[29b2]** Implement real-time homing status updates for Mission Planner display integration
    - **[ ]** **[29b3]** Add homing substage reporting (APPROACH, SPIRAL_SEARCH, S_TURN, RETURN_TO_PEAK)
    - **[ ]** **[29b4]** Create homing performance metrics parameters (success_rate, average_time, confidence_level)
    - **[ ]** **[29c1]** Implement MAV_CMD_USER_2 emergency RF disable with immediate response (<100ms)
    - **[ ]** **[29c2]** Create emergency disable safety validation and operator confirmation system
    - **[ ]** **[29c3]** Add emergency disable logging and notification system for incident analysis
    - **[ ]** **[29c4]** Implement emergency disable integration with existing safety authority hierarchy
    - **[ ]** **[29d1]** Create parameter persistence storage system using local configuration files
    - **[ ]** **[29d2]** Implement parameter backup and restore functionality for system recovery
    - **[ ]** **[29d3]** Add parameter validation on system startup with automatic correction
    - **[ ]** **[29d4]** Create parameter migration system for version updates and compatibility
- **DoD Task:** Mission Planner successfully controls RF frequency and homing operations via parameter interface, <50ms response time achieved
- **DoD Story:** Complete RF control accessible within Mission Planner interface
- **DoD Epic:** Mission Planner RF integration validated in comprehensive testing
- **Context:** Enables unified operator control eliminating need for separate RF control applications
- **PRD Reference:** **PRD-FR11** Operator full override capability, **PRD-FR14** Operator explicitly activate homing mode
- **Progress:** 0%
- **User Approval:** *[PENDING - requires approval before execution]*

**`[ ]`** **`[TASK-6.3.2-ENHANCED-RF-TELEMETRY-VISUALIZATION]`** **Enhanced RF Telemetry and Mission Planner Visualization** **[Priority: P0]** **[Concurrency: ðŸŸ¡ CONDITIONAL]**
- **Hardware:** *HackRF One signal processing, existing telemetry infrastructure*
- **Files:** MAVLink telemetry enhancement, `NAMED_VALUE_FLOAT` message extensions, visualization data
- **Dependencies:** Story 6.1 SUBTASK-6.1.3.2 complete (Enhanced RF telemetry for Mission Planner), Story 6.2 enhanced algorithms
- **Integration Points:** **VERIFIED** - Existing telemetry streaming, Mission Planner display compatibility, ASV enhanced data
- **Parallel Development:** **ðŸŸ¡ CONDITIONAL** - Can develop telemetry structure in parallel, sequential dependency on enhanced algorithm data
- **Prerequisites:** Enhanced signal processing with confidence metrics from Stories 6.1 and 6.2
- **Integration Boundary:** Enhanced telemetry data - requires ASV signal classification and confidence metrics
- **Resource Conflicts:** MAVLink telemetry bandwidth - coordinate to avoid saturation
- **Max Developers:** 1 (telemetry implementation and visualization)
- **Subtasks:**
  - **[ ]** **SUBTASK-6.3.2.1:** Enhanced telemetry message implementation
    - **[ ]** **[30a1]** Extend NAMED_VALUE_FLOAT with PISAD_SIG_CLASS parameter (0=FM_CHIRP, 1=CONTINUOUS, 2=NOISE, 3=INTERFERENCE)
    - **[ ]** **[30a2]** Implement signal classification confidence telemetry (PISAD_CLASS_CONF) with 0.0-1.0 range
    - **[ ]** **[30a3]** Add signal type characteristics telemetry (PISAD_SIG_CHAR) for signal pattern identification
    - **[ ]** **[30a4]** Create signal detection event telemetry (PISAD_DETECT_EVENT) with timestamp and classification
    - **[ ]** **[30b1]** Implement PISAD_SIG_CONF parameter with ASV confidence metrics (0-100% scale for Mission Planner)
    - **[ ]** **[30b2]** Add confidence trend telemetry (PISAD_CONF_TREND) with rate of change calculation
    - **[ ]** **[30b3]** Create confidence threshold status telemetry (PISAD_CONF_STATUS) for operator awareness
    - **[ ]** **[30b4]** Implement confidence-based color coding recommendations for Mission Planner visualization
    - **[ ]** **[30c1]** Create PISAD_BEARING parameter with ASV professional bearing calculation (0-360 degrees)
    - **[ ]** **[30c2]** Implement PISAD_BEAR_CONF parameter with bearing confidence metrics (0-100% scale)
    - **[ ]** **[30c3]** Add bearing precision telemetry (PISAD_BEAR_PREC) reporting Â±degree accuracy
    - **[ ]** **[30c4]** Create bearing rate of change telemetry (PISAD_BEAR_RATE) for movement tracking
    - **[ ]** **[30d1]** Implement PISAD_INTERFERENCE parameter with interference level (0-100% scale)
    - **[ ]** **[30d2]** Add interference source classification (PISAD_INTERF_TYPE) with source identification
    - **[ ]** **[30d3]** Create interference location estimation telemetry (PISAD_INTERF_BEAR) when determinable
    - **[ ]** **[30d4]** Implement interference rejection status (PISAD_REJECT_STATUS) showing filtering effectiveness
  - **[ ]** **SUBTASK-6.3.2.2:** Mission Planner visualization optimization  
    - **[ ]** **[31a1]** Implement adaptive telemetry rate controller (10Hz RSSI, 2Hz status, 0.5Hz health) with bandwidth monitoring
    - **[ ]** **[31a2]** Create telemetry priority system to ensure critical data during bandwidth constraints
    - **[ ]** **[31a3]** Add telemetry compression for enhanced data transmission efficiency
    - **[ ]** **[31a4]** Implement telemetry overflow protection to prevent Mission Planner buffer saturation
    - **[ ]** **[31b1]** Create RSSI trend data formatting compatible with Mission Planner's time-series graphing system
    - **[ ]** **[31b2]** Implement RSSI smoothing and filtering for stable Mission Planner trend visualization
    - **[ ]** **[31b3]** Add RSSI threshold markers and alerts for operator decision support
    - **[ ]** **[31b4]** Create RSSI gradient visualization data showing signal strength direction changes
    - **[ ]** **[31c1]** Implement RF detection event STATUSTEXT notifications with severity classification
    - **[ ]** **[31c2]** Create detection event filtering to prevent Mission Planner message flooding
    - **[ ]** **[31c3]** Add detection event acknowledgment system for operator awareness confirmation
    - **[ ]** **[31c4]** Implement detection event logging integration with Mission Planner flight logs
    - **[ ]** **[31d1]** Create signal quality HUD indicators compatible with Mission Planner overlay system
    - **[ ]** **[31d2]** Implement color-coded signal strength visualization (red/yellow/green) for quick assessment
    - **[ ]** **[31d3]** Add signal quality trend arrows and indicators for Mission Planner status display
    - **[ ]** **[31d4]** Create signal quality alert system with configurable thresholds for operator warnings
- **DoD Task:** Enhanced RF telemetry successfully displayed in Mission Planner with optimized update rates
- **DoD Story:** Complete RF situational awareness available within Mission Planner
- **DoD Epic:** Mission Planner RF visualization validated for operational use
- **Context:** Provides operator with comprehensive RF situational awareness without external monitoring tools
- **PRD Reference:** **PRD-FR9** Stream RSSI telemetry to ground control station, **PRD-FR12** Log all signal detections
- **Progress:** 0%
- **User Approval:** *[PENDING - requires approval before execution]*

**`[ ]`** **`[TASK-6.3.3-OPERATOR-WORKFLOW-INTEGRATION]`** **Complete Operator Workflow Integration with Mission Planner** **[Priority: P1]** **[Concurrency: ðŸŸ¡ CONDITIONAL]**
- **Hardware:** *Complete system integration - HackRF, Cube Red, Mission Planner workstation*
- **Files:** Operator documentation, workflow procedures, Mission Planner configuration
- **Dependencies:** TASK-6.3.1 and TASK-6.3.2 complete, RF control and telemetry operational in Mission Planner
- **Integration Points:** **VERIFIED** - Mission Planner interface, operator procedures, system integration
- **Parallel Development:** **ðŸŸ¡ CONDITIONAL** - Can develop documentation in parallel, sequential dependency on interface completion
- **Prerequisites:** RF control and telemetry integration complete from TASK-6.3.1 and TASK-6.3.2
- **Integration Boundary:** Workflow validation - requires completed Mission Planner integration
- **Resource Conflicts:** *None identified* - documentation and procedure focus
- **Max Developers:** 1 (documentation and workflow design)
- **Subtasks:**
  - **[ ]** **SUBTASK-6.3.3.1:** Mission Planner configuration and setup procedures
    - **[ ]** **[32a1]** Create comprehensive Mission Planner parameter configuration guide with screenshots and step-by-step instructions
    - **[ ]** **[32a2]** Document PISAD parameter mapping and descriptions for Mission Planner Full Parameter Tree
    - **[ ]** **[32a3]** Create Mission Planner parameter file templates for rapid PISAD RF integration setup
    - **[ ]** **[32a4]** Design parameter validation checklist and troubleshooting guide for configuration errors
    - **[ ]** **[32b1]** Document frequency selection procedures for Emergency Beacon profile (406MHz ELT operations)
    - **[ ]** **[32b2]** Create Aviation Emergency profile documentation (121.5MHz aviation distress procedures)
    - **[ ]** **[32b3]** Document Search and Rescue profile (162.025MHz maritime emergency beacon operations)
    - **[ ]** **[32b4]** Create Custom frequency selection guide with RF regulation compliance and interference avoidance
    - **[ ]** **[32c1]** Design Mission Planner homing activation workflow with pre-activation safety checklist
    - **[ ]** **[32c2]** Create homing command sequence documentation with confirmation and monitoring procedures
    - **[ ]** **[32c3]** Document homing status interpretation and operator decision points within Mission Planner
    - **[ ]** **[32c4]** Design homing deactivation procedures and transition back to manual control
    - **[ ]** **[32d1]** Create emergency RF disable procedures with MAV_CMD_USER_2 command documentation
    - **[ ]** **[32d2]** Document safety override hierarchy and Mission Planner mode change emergency procedures
    - **[ ]** **[32d3]** Create incident response procedures for RF system failures within Mission Planner
    - **[ ]** **[32d4]** Design emergency communication protocols when RF homing encounters critical errors
  - **[ ]** **SUBTASK-6.3.3.2:** Operator training and workflow validation
    - **[ ]** **[33a1]** Create comprehensive operator training curriculum for Mission Planner RF integration
    - **[ ]** **[33a2]** Design hands-on training scenarios covering frequency selection, homing activation, and emergency procedures
    - **[ ]** **[33a3]** Create operator competency assessment and certification procedures for PISAD RF operations
    - **[ ]** **[33a4]** Develop advanced operator training for complex scenarios (interference, multi-signal, degraded conditions)
    - **[ ]** **[33b1]** Design mission planning template incorporating RF search patterns and target frequencies
    - **[ ]** **[33b2]** Create pre-flight checklist integration with Mission Planner flight planning
    - **[ ]** **[33b3]** Document mission execution procedures with RF detection and homing decision points
    - **[ ]** **[33b4]** Design post-mission analysis procedures using Mission Planner logs and RF telemetry data
    - **[ ]** **[33c1]** Create comprehensive troubleshooting decision tree for RF system malfunctions
    - **[ ]** **[33c2]** Document Mission Planner connectivity and parameter synchronization troubleshooting
    - **[ ]** **[33c3]** Design RF hardware troubleshooting procedures (HackRF, antenna, interference sources)
    - **[ ]** **[33c4]** Create system recovery procedures for RF integration failures and fallback operations
    - **[ ]** **[33d1]** Design compact operator reference cards for cockpit use during SAR operations
    - **[ ]** **[33d2]** Create quick reference guides for emergency procedures and critical parameter access
    - **[ ]** **[33d3]** Design visual quick-reference cards for frequency profiles and signal classification
    - **[ ]** **[33d4]** Create operator decision support cards for homing activation and troubleshooting scenarios
- **DoD Task:** Complete operator workflow documented and validated for Mission Planner RF integration
- **DoD Story:** Mission Planner RF integration ready for operator training and field deployment
- **DoD Epic:** Complete Mission Planner RF integration validated for operational deployment  
- **Context:** Ensures seamless operator transition to integrated RF control within familiar Mission Planner interface
- **PRD Reference:** **PRD-NFR10** System deployment by single operator achievable in under 15 minutes
- **Progress:** 0%
- **User Approval:** *[PENDING - requires approval before execution]*

**`[ ]`** **`[TASK-6.3.4-INTEGRATION-TESTING-AND-VALIDATION]`** **Mission Planner RF Integration Testing** **[Priority: P1]** **[Concurrency: ðŸ”´ SEQUENTIAL]**
- **Hardware:** *Complete hardware setup - HackRF One, Cube Red, Mission Planner workstation*
- **Files:** Integration test suite, validation scripts, performance benchmarking
- **Dependencies:** TASK-6.3.1, TASK-6.3.2, and TASK-6.3.3 complete, full Mission Planner RF integration operational
- **Integration Points:** **VERIFIED** - Complete system integration, Mission Planner compatibility, operator workflow validation
- **Parallel Development:** **ðŸ”´ SEQUENTIAL** - Requires complete Mission Planner integration before testing
- **Prerequisites:** Full Mission Planner RF integration operational
- **Integration Boundary:** N/A (standalone testing task)
- **Resource Conflicts:** Hardware usage for testing - coordinate with development activities
- **Max Developers:** 1 (testing and validation focus)
- **Subtasks:**
  - **[ ]** **SUBTASK-6.3.4.1:** Mission Planner integration testing
    - **[ ]** **[34a1]** Create automated test suite for frequency selection parameter validation with timing measurements
    - **[ ]** **[34a2]** Test frequency profile switching (Emergency, Aviation, SAR, Custom) with response time validation
    - **[ ]** **[34a3]** Validate frequency parameter persistence across Mission Planner restarts and connection cycles
    - **[ ]** **[34a4]** Test frequency validation and error handling with out-of-range and invalid frequency inputs
    - **[ ]** **[34b1]** Create automated homing activation test scenarios using MAV_CMD_USER_1 command interface
    - **[ ]** **[34b2]** Test homing status parameter updates and Mission Planner display synchronization
    - **[ ]** **[34b3]** Validate homing deactivation procedures and safety interlock functionality
    - **[ ]** **[34b4]** Test homing control integration with enhanced algorithms and ASV confidence metrics
    - **[ ]** **[34c1]** Create telemetry rate testing with bandwidth monitoring and Mission Planner performance impact
    - **[ ]** **[34c2]** Test enhanced telemetry message display and formatting in Mission Planner interface
    - **[ ]** **[34c3]** Validate telemetry data accuracy and synchronization with actual RF system status
    - **[ ]** **[34c4]** Test telemetry overflow protection and priority systems during high-load scenarios
    - **[ ]** **[34d1]** Create emergency override test scenarios using MAV_CMD_USER_2 and mode change procedures
    - **[ ]** **[34d2]** Test emergency disable response times and safety system integration
    - **[ ]** **[34d3]** Validate emergency procedure effectiveness and operator notification systems
    - **[ ]** **[34d4]** Test emergency recovery and system restoration procedures after override activation
  - **[ ]** **SUBTASK-6.3.4.2:** Performance and compatibility validation
    - **[ ]** **[35a1]** Create Mission Planner performance benchmarking suite with CPU, memory, and UI responsiveness monitoring
    - **[ ]** **[35a2]** Test telemetry rate impact on Mission Planner performance with varying update frequencies
    - **[ ]** **[35a3]** Validate Mission Planner stability under maximum RF telemetry load conditions
    - **[ ]** **[35a4]** Benchmark comparison between PISAD RF integration and baseline Mission Planner performance
    - **[ ]** **[35b1]** Test Mission Planner version compatibility starting with v1.3.75 through latest stable release
    - **[ ]** **[35b2]** Validate PISAD parameter interface compatibility across Mission Planner version updates
    - **[ ]** **[35b3]** Test enhanced telemetry message compatibility with different Mission Planner builds
    - **[ ]** **[35b4]** Create Mission Planner version compatibility matrix and requirement documentation
    - **[ ]** **[35c1]** Design extended operation test scenarios (2+ hours continuous operation) with stability monitoring
    - **[ ]** **[35c2]** Test memory leak detection and resource usage monitoring during extended RF operations
    - **[ ]** **[35c3]** Validate Mission Planner log integrity and data consistency during long-term operations
    - **[ ]** **[35c4]** Test connection recovery and parameter synchronization after communication interruptions
    - **[ ]** **[35d1]** Create operator workflow efficiency comparison study between integrated and separate applications
    - **[ ]** **[35d2]** Measure task completion times for common RF operations (frequency change, homing activation)
    - **[ ]** **[35d3]** Validate operator situational awareness improvements with integrated RF telemetry display
    - **[ ]** **[35d4]** Test operator error reduction and safety improvements with unified Mission Planner interface
- **DoD Task:** Mission Planner RF integration passes comprehensive testing and meets performance requirements
- **DoD Story:** Mission Planner RF integration validated and ready for Story 6.4 field testing
- **DoD Epic:** Complete Mission Planner integration ready for operational deployment and field validation
- **Context:** Ensures Mission Planner RF integration meets all performance and reliability requirements before field deployment
- **PRD Reference:** **PRD-NFR1** MAVLink communication <1% packet loss, **PRD-NFR2** Signal processing latency <100ms
- **Progress:** 0%
- **User Approval:** *[PENDING - requires approval before execution]*

## **ðŸ”§ TECHNICAL ARCHITECTURE**

### Mission Planner Parameter Integration
```python
# MAVLink Parameter Interface for Mission Planner RF Control
class MissionPlannerRFInterface:
    """Mission Planner RF control integration via MAVLink parameters."""
    
    PARAMETERS = {
        # Frequency Control Parameters
        'PISAD_RF_FREQ': {
            'type': 'REAL32',
            'range': (1_000_000, 6_000_000_000),  # 1MHz - 6GHz
            'default': 406_000_000,  # 406MHz emergency beacon
            'description': 'RF Center Frequency (Hz)'
        },
        'PISAD_RF_PROFILE': {
            'type': 'INT32',
            'range': (0, 2),  # 0=Emergency, 1=Aviation, 2=Custom
            'default': 0,
            'description': 'RF Profile Selection'
        },
        # Homing Control Parameters  
        'PISAD_HOMING_ENABLE': {
            'type': 'INT32',
            'range': (0, 1),
            'default': 0,
            'description': 'RF Homing Enable (0=Off, 1=On)'
        },
        'PISAD_HOMING_STATE': {
            'type': 'INT32',
            'readonly': True,
            'description': 'Current Homing State'
        }
    }
    
    async def handle_parameter_change(self, param_name: str, new_value: Any) -> bool:
        """Handle Mission Planner parameter changes with <50ms response time."""
        start_time = time.perf_counter()
        
        if param_name == 'PISAD_RF_FREQ':
            await self.asv_service.set_frequency(new_value)
        elif param_name == 'PISAD_RF_PROFILE':
            await self.apply_frequency_profile(new_value)
        elif param_name == 'PISAD_HOMING_ENABLE':
            await self.toggle_homing(bool(new_value))
            
        response_time = (time.perf_counter() - start_time) * 1000
        logger.info(f"Parameter {param_name} updated in {response_time:.1f}ms")
        return response_time < 50.0  # <50ms requirement
```

### Enhanced Telemetry for Mission Planner
```python
# Enhanced RF Telemetry Stream for Mission Planner Visualization
class MissionPlannerTelemetryService:
    """Enhanced RF telemetry optimized for Mission Planner display."""
    
    TELEMETRY_MESSAGES = {
        # High-frequency telemetry (10Hz)
        'PISAD_RSSI': ('RSSI dBm', 'signal_processor.current_rssi'),
        'PISAD_SNR': ('SNR dB', 'signal_processor.current_snr'),
        
        # Medium-frequency telemetry (2Hz)
        'PISAD_SIG_CONF': ('Signal Confidence %', 'asv_analyzer.confidence'),
        'PISAD_BEARING': ('Bearing Degrees', 'asv_analyzer.bearing'),
        'PISAD_BEAR_CONF': ('Bearing Confidence %', 'asv_analyzer.bearing_confidence'),
        'PISAD_SIG_CLASS': ('Signal Class', 'asv_analyzer.signal_classification'),
        
        # Low-frequency telemetry (0.5Hz)
        'PISAD_INTERFERENCE': ('Interference Level', 'asv_analyzer.interference_level'),
        'PISAD_RF_HEALTH': ('RF System Health', 'asv_service.health_status')
    }
    
    async def stream_telemetry_optimized(self):
        """Stream RF telemetry with optimized rates for Mission Planner."""
        # High-frequency RSSI data (10Hz)
        if self.should_send_high_freq():
            await self.send_named_value_float('PISAD_RSSI', self.get_current_rssi())
            
        # Medium-frequency enhanced data (2Hz) 
        if self.should_send_medium_freq():
            await self.send_enhanced_rf_telemetry()
            
        # Detection events via STATUSTEXT immediately
        if self.new_detection_event:
            await self.send_statustext(f"RF Detection: {self.latest_detection}")
```

### Operator Workflow Integration
```python
# Mission Planner RF Workflow Integration
class MissionPlannerWorkflow:
    """Integrated RF workflow within Mission Planner interface."""
    
    RF_PROFILES = {
        0: {'name': 'Emergency Beacon', 'freq': 406_000_000, 'bandwidth': 25_000},
        1: {'name': 'Aviation Emergency', 'freq': 121_500_000, 'bandwidth': 50_000},
        2: {'name': 'Custom', 'freq': 'user_defined', 'bandwidth': 'user_defined'}
    }
    
    HOMING_WORKFLOW = {
        'pre_activation_checks': [
            'verify_guided_mode',
            'confirm_signal_detected',
            'validate_safety_systems',
            'operator_confirmation'
        ],
        'activation_sequence': [
            'set_homing_parameter',
            'monitor_confirmation',
            'verify_velocity_commands',
            'continuous_monitoring'
        ],
        'emergency_procedures': [
            'mode_change_override',
            'emergency_disable_command',
            'manual_control_resume'
        ]
    }
```

## **ðŸ“Š MISSION PLANNER INTEGRATION BENEFITS**

| Feature | Current Separate Tools | Integrated Mission Planner | Improvement |
|---------|----------------------|---------------------------|-------------|
| **Frequency Selection** | External RF app | Mission Planner parameters | **Unified interface** |
| **Homing Control** | Separate web UI | Mission Planner commands | **Single application** |
| **RF Visualization** | External monitoring | Mission Planner telemetry | **Integrated display** |
| **Emergency Override** | Multiple interfaces | Mission Planner safety | **Streamlined response** |
| **Operator Training** | Multi-app complexity | Single familiar interface | **Simplified workflows** |
| **Mission Planning** | Manual coordination | Integrated RF operations | **Seamless planning** |

## **ðŸ”„ DEPENDENCIES AND INTEGRATION**

### Story Dependencies
- **Story 6.1**: ASV foundation and Mission Planner interface foundation complete
- **Story 6.2**: Enhanced homing algorithms provide confidence metrics for telemetry
- **Story 6.4**: Field testing validates complete Mission Planner integration

### Hardware Dependencies
- **Cube Red**: Existing MAVLink communication (no hardware changes)
- **Mission Planner Workstation**: Standard GCS computer with Mission Planner 1.3.75+
- **Network Connection**: Standard MAVLink communication (USB/telemetry radio)

### Service Integration Points
- **Preserved**: All existing MAVLink communication and safety overrides
- **Enhanced**: RF control and telemetry through Mission Planner interface
- **Extended**: Operator workflow integration eliminating external applications
- **Maintained**: 100% compatibility with existing Mission Planner functionality

## **ðŸŽ¯ SUCCESS CRITERIA**

### Technical Validation
- **Parameter Interface**: RF frequency selection via Mission Planner parameters <50ms response
- **Telemetry Integration**: Enhanced RF data displayed in Mission Planner without overload
- **Homing Control**: Complete homing operation control through Mission Planner interface
- **Safety Preservation**: All emergency overrides accessible through Mission Planner
- **Performance Compliance**: No degradation of Mission Planner responsiveness

### Operational Benefits
- **Unified Interface**: Single application (Mission Planner) for complete SAR operations
- **Reduced Training**: Operators use familiar Mission Planner interface for RF operations
- **Streamlined Workflow**: RF control integrated into standard mission planning procedures
- **Enhanced Situational Awareness**: RF data visualization within primary flight interface
- **Simplified Deployment**: No additional software installation or configuration required

### Integration Verification
- **Mission Planner Compatibility**: Validated across Mission Planner 1.3.75+ versions
- **Workflow Efficiency**: Faster RF operations compared to separate applications
- **Safety Compliance**: All safety procedures accessible through Mission Planner interface
- **Documentation Completeness**: Comprehensive operator guides for integrated RF operations

---

**Story ID:** `6.3`  
**Epic:** `6 - ASV SDR Framework Integration`  
**Priority:** P0 - Critical for operator workflow efficiency and unified control interface  
**Dependencies:** Story 6.1 complete (Mission Planner foundation), Story 6.2 in progress (enhanced telemetry data)  
**Hardware Requirements:** Existing Cube Red + Mission Planner workstation (no additional hardware)  
**Estimated Total Effort:** 14-20 hours across 2-3 weeks  
**Build Status:** âœ… **READY TO PROCEED** after Story 6.1 completion